<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    <title>The Celestial </title>

    <!-- WinJS references -->
    <link id="stylesheet" href="/Microsoft.WinJS.4.4/css/ui-light.css" rel="stylesheet" />

    <script src="/Microsoft.WinJS.4.4/js/base.js"></script>
    <script src="/Microsoft.WinJS.4.4/js/ui.js"></script>

    <!-- TheHeavenGuard references -->
    <link href="/css/MainWindow.css" rel="stylesheet" />

    <!-- NoSQL javascript database https://pouchdb.com/ -->
    <script src="/js/libs/pouchdb-6.0.7.min.js"></script>
    <!-- library for loading JSON using streaming http://oboejs.com/-->
    <script src="/js/libs/oboe-browser.min.js"></script>

    <!-- cloud's uri for xhr -->
    <script src="/js/Configurations.js"></script>

    <!--
        MainWindow.js use
        PouchDB as local database,
        Configurator as cloud uri for xhr
    -->
    <script src="/js/MainWindow.js"></script>

    <!-- Configure databases -->
    <script src="/js/Databases.js"></script>
    <!-- Client side files to synchronize -->
    <script src="/js/FileBrowser.js"></script>
    <!-- Authenticate in cloud services -->
    <script src="/js/AuthenticationBroker.js"></script>
    <!-- Authorization panel in cloud services -->
    <script src="/js/AuthPanel.js"></script>
    <!-- Upload file to server -->
    <script src="/js/BackgroundTransfer.js"></script>
    <!-- XHR over all -->
    <script src="/js/XMLHttpRequest.js"></script>
</head>

<body>
    <!-- Settings SplitView -->
    <div id="splitView" data-win-control="WinJS.UI.SplitView" 
         data-win-options="{
                panePlacement: 'right',
                openedDisplayMode: 'overlay',
                closedDisplayMode: 'none'
             }">

        <!-- Split View body inside SVSettings.html page -->
        <div data-win-control="WinJS.UI.HtmlControl"
             data-win-options="{uri: '/html/SVSettings.html' }">
        </div>
    </div>

    <!-- Authorization in services split view -->
    <div id="authPanel" data-win-control="WinJS.UI.SplitView" 
         data-win-options="{
                panePlacement: 'left',
                paneOpened: 'true',
                openedDisplayMode: 'inline'
             }">

        <div>
            <div class="header">
                <button class="win-splitviewpanetoggle"
                        data-win-control="WinJS.UI.SplitViewPaneToggle"
                        data-win-options="{ splitView: select('#authPanel') }">
                </button>
            </div>

            <div id="authPanelNavCommands">
                <!-- Place for generated button from AuthPanel.js -->
            </div>

            <!-- Setting button -->
            <div id="settingNavCommand"
                 data-win-control="WinJS.UI.SplitViewCommand"
                 data-win-options="{ label: 'Settings', icon: 'settings'}">
            </div>
        </div>

        <!-- Content Area -->
        <div id="pivot" data-win-control="WinJS.UI.Pivot">
            <div data-win-control="WinJS.UI.PivotItem" 
                 data-win-options="{ header : 'Home' }">

                <!-- Header for zoomed in list view -->
                <div id="zoomedInLeftHeader" class="zoomedIn-left-header"
                     data-win-control="WinJS.Binding.Template">
                    <div class="zoomedIn-left-header-root win-type-title">
                        <div data-win-bind="innerHTML: title"></div>
                    </div>
                </div>

                <div id="semanticZoomDiv" data-win-control="WinJS.UI.SemanticZoom">
                    <!-- File browser zoomed in list view -->
                    <div id="zoomedInListView"
                         data-win-control="WinJS.UI.ListView"
                         data-win-options="{
                            itemDataSource: FileBrowser.data.dataSource,
                            itemTemplate: FileBrowser.multistageRenderer,
                            groupDataSource: FileBrowser.data.groups.dataSource,
                            groupHeaderTemplate: select('#zoomedInLeftHeader'),
                            selectionMode: 'multi',
                            tapBehavior: WinJS.UI.TapBehavior.toggleSelect,
                            layout: { type: WinJS.UI.GridLayout, groupHeaderPosition: 'left' }
                        }">
                    </div>

                    <!-- Zoomed out list view -->
                    <div id="zoomedOutListView"
                         data-win-control="WinJS.UI.ListView"
                         data-win-options="{
                                itemDataSource: FileBrowser.data.groups.dataSource,
                                itemTemplate: FileBrowser.placeholderRenderer,
                                selectionMode: 'none',
                                tapBehavior: 'invoke',
                                layout: { type: WinJS.UI.GridLayout }
                             }">
                    </div>
                </div>
            </div>
        </div>

        <!-- AppBar -->
        <div class="app-bar">
            <div class="control-app-bar" 
                 data-win-control="WinJS.UI.AppBar" 
                 data-win-options="{ placement: 'bottom' }">

                <button data-win-control="WinJS.UI.Command"
                        data-win-options="{
                                    id: 'testBtn',
                                    label: 'testBtn',
                                    icon: 'home'
                                }"></button>

                <button data-win-control="WinJS.UI.Command" 
                        data-win-options="{
                                    id: 'startSyncFilesBtn',
                                    label: 'Synchronize',
                                    icon: 'sync'
                                }"></button>

                <hr data-win-control="WinJS.UI.Command" 
                    data-win-options="{ type: 'separator' }" />

                <div data-win-control="WinJS.UI.Command" 
                     data-win-options="{ 
                     id: 'search', 
                     type: 'content' }">
                    <div class="win-interactive" 
                         data-win-control="WinJS.UI.AutoSuggestBox"
                         data-win-options="{
                            placeholderText: 'Search file',
                            onsuggestionsrequested: FileBrowser.suggestionsRequestedHandler,
                            onquerysubmitted: FileBrowser.querySubmittedHandler
                         }">
                    </div>
                </div>

                <hr data-win-control="WinJS.UI.Command" 
                    data-win-options="{ type: 'separator' }" />

                <!-- Work with List View items buttons -->
                <button data-win-control="WinJS.UI.Command"
                         data-win-options="{
                                    id: 'removeItemsBtn',
                                    label: 'Remove Selected',
                                    icon: 'delete'
                                }">
                </button>
                <button data-win-control="WinJS.UI.Command" 
                        data-win-options="{
                                    id: 'selectAllItemsBtn',
                                    label: 'Select All Items',
                                    icon: 'selectall'
                                }">
                </button>
                <button data-win-control="WinJS.UI.Command" 
                        data-win-options="{
                                    id: 'clearSelectionBtn',
                                    label: 'Clear Selection',
                                    icon: 'clearselection'
                                }">
                </button>

                <hr data-win-control="WinJS.UI.Command" 
                    data-win-options="{ type: 'separator' }" />

                <button data-win-control="WinJS.UI.Command" 
                        data-win-options="{
                                    id: 'addFilesBtn',
                                    label: 'Pick Files',
                                    icon: 'openfile'
                                }">
                </button>

                <button data-win-control="WinJS.UI.Command" 
                        data-win-options="{
                            id: 'addFolderBtn',
                            label: 'Pick Folder',
                            icon: 'newfolder'
                        }">
                </button>
            </div>
        </div>
    </div>

    <!-- Undo change Popup dialog -->
    <div class="undo-changes" id="undoChangeLine">
        <button data-win-control="WinJS.UI.Command"
                data-win-options="{
                                icon: 'undo',
                                label: 'Undo Change',
                                id: 'undoChangeBtn',
                                extraClass: 'undo-change-btn win-button'
                             }"></button>

        <button data-win-control="WinJS.UI.Command"
                data-win-options="{
                                icon: 'clear',
                                id: 'closeUndoPanelBtn',
                                extraClass: 'close-undo-line-btn win-button'
                              }"></button>
    </div>
</body>
</html>