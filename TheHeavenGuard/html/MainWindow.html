<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    <title>The Heaven Guard</title>

    <!-- WinJS references -->
    <link href="/Microsoft.WinJS.4.4/css/ui-light.css" rel="stylesheet" />

    <script src="/Microsoft.WinJS.4.4/js/base.js"></script>
    <script src="/Microsoft.WinJS.4.4/js/ui.js"></script>

    <!-- TheHeavenGuard references -->
    <link href="/css/MainWindow.css" rel="stylesheet" />

    <script src="/js/libs/pouchdb-5.4.4.min.js"></script> <!-- NoSQL javascript database https://pouchdb.com/ -->
    <script src="/js/libs/oboe-browser.min.js"></script> <!-- library for loading JSON using streaming http://oboejs.com/-->

    <script src="/js/Configurations.js"></script> <!-- cloud's uri for xhr -->
    <!--
        MainWindow.js use
        PouchDB as local database,
        Configurator as cloud uri for xhr
    -->
    <script src="/js/MainWindow.js"></script>
    <script src="/js/SettingsPage.js"></script>

    <script src="/js/Databases.js"></script> <!-- Configure databases -->
    <script src="/js/FileBrowser.js"></script> <!-- Client side files to synchronize -->
    <script src="/js/AuthenticationBroker.js"></script> <!-- Authenticate in cloud services -->
    <script src="/js/AuthPanel.js"></script> <!-- Left panel functions -->
    <script src="/js/BackgroundTransfer.js"></script> <!-- Upload file to server -->
    <script src="/js/XMLHttpRequest.js"></script> <!-- XHR over all -->
</head>

<body>
    <div class="main-page" id="mainPage">
        <!-- Authorization panel -->
        <div class="clouds-authorization-panel">
            <div class="panel-head">
                <div id="hamburgerBtn"
                     data-win-control="WinJS.UI.NavBarCommand"
                     data-win-options="{ icon: 'hamburger' }">
                </div>
            </div>

            <!-- Button replacement -->
            <div id="panelBody" class="panel-body"></div>

            <!-- Shows listView items in zoomed out mode -->
            <div class="panel-footer">
                <!-- ListView items in the zoomed out of the SemanticZoom template -->
                <div id="zoomedOutTemplate" data-win-control="WinJS.Binding.Template">
                    <div class="zoomed-out-item">
                        <h2 class="zoomed-out-item-title" data-win-bind="innerText: title"></h2>
                    </div>
                </div>

                <!-- Zoomed out display mode -->
                <div id="zoomedOutListView"
                     data-win-control="WinJS.UI.ListView"
                     data-win-options="{
                                itemDataSource: FileBrowser.data.groups.dataSource,
                                itemTemplate: FileBrowser.placeholderRenderer,
                                selectionMode: 'none',
                                tapBehavior: 'invoke',
                                layout: { type: WinJS.UI.GridLayout }
                             }">
                </div>

                <button class="win-button auth-panel-btn setting-btn" id="settingsBtn">
                    <div class="cloud-avatar"> &#xe115; </div> <!-- gear icon -->
                    <p class="auth-btn-text"> Settings </p>
                </button>
            </div>

            <!-- Button for calling the zoomedOutListView in minimized-panel mode -->
            <button class="auth-panel-btn win-button zoomed-out-btn">
                <p> &#xe12B; </p> <!-- globe icon -->
            </button>
        </div>

        <!-- Content area -->
        <div id="pivot" data-win-control="WinJS.UI.Pivot">
            <div data-win-control="WinJS.UI.PivotItem" data-win-options="{ header : 'Home' }">
                <!-- ListView Header template -->
                <div id="leftHeaderTemplate" class="left-header-template"
                     data-win-control="WinJS.Binding.Template">
                    <div class="left-header-template-root">
                        <div data-win-bind="innerText: title"></div>
                    </div>
                </div>

                <!-- ListView Template  -->
                <div class="listview-template" id="listViewTemplate"
                     data-win-control="WinJS.Binding.Template">
                    <div class="listview-template-item">
                        <div class="listview-template-item-icon" id="lisViewTemplateItemIcon"
                             data-win-bind="innerHTML: icon"></div>

                        <div class="listview-template-item-detail">
                            <div class="listview-template-item-title" data-win-bind="textContent: title"></div>
                            <div class="listview-template-item-date" data-win-bind="textContent: text"></div>
                        </div>
                    </div>
                </div>

                <!-- Custom controlls of the Semantic zoom -->
                <!-- Zoomed in display mode -->
                <div id="zoomedInListView" class="win-selectionstylefilled"
                     data-win-control="WinJS.UI.ListView"
                     data-win-options="{
                        itemDataSource: FileBrowser.data.dataSource,
                        itemTemplate: FileBrowser.multistageRenderer,
                        groupDataSource: FileBrowser.data.groups.dataSource,
                        groupHeaderTemplate: select('#leftHeaderTemplate'),
                        selectionMode: 'multi',
                        tapBehavior: WinJS.UI.TapBehavior.toggleSelect,
                        layout: { type: WinJS.UI.GridLayout, groupHeaderPosition: 'left' }
                    }">
                </div>

                <!-- Undo change Popup dialog -->
                <div class="undo-changes" id="undoChangeLine">
                    <div id="undoChangeBtn" class="undo-change-btn win-button"
                         data-win-control="WinJS.UI.NavBarCommand"
                         data-win-options="{ icon: 'undo', label: 'Undo Change' }">
                    </div>

                    <div id="closeUndoPanelBtn" class="close-undo-line-btn win-button"
                         data-win-control="WinJS.UI.NavBarCommand"
                         data-win-options="{ icon: 'clear' }">
                    </div>
                </div>
            </div>
        </div>

        <!-- AppBar -->
        <div class="app-bar">
            <div class="customAppBar" data-win-control="WinJS.UI.AppBar" data-win-options="{ placement: 'bottom' }">
                <button data-win-control="WinJS.UI.Command" data-win-options="{
                                    id: 'startSyncFilesBtn',
                                    label: 'Synchronize',
                                    icon: 'sync'
                                }"></button>

                <hr data-win-control="WinJS.UI.Command" data-win-options="{ type: 'separator' }" />

                <div data-win-control="WinJS.UI.Command" data-win-options="{ id: 'search', type: 'content' }">
                    <div class="win-interactive" data-win-control="WinJS.UI.AutoSuggestBox"
                         data-win-options="{
                            placeholderText: 'Search file',
                            onsuggestionsrequested: FileBrowser.suggestionsRequestedHandler,
                            onquerysubmitted: FileBrowser.querySubmittedHandler
                         }">
                    </div>
                </div>

                <hr data-win-control="WinJS.UI.Command" data-win-options="{ type: 'separator' }" />

                <!-- Work with List View items buttons -->
                <button data-win-control="WinJS.UI.Command" data-win-options="{
                                    id: 'removeItemsBtn',
                                    label: 'Remove Selected',
                                    icon: 'delete'
                                }"></button>
                <button data-win-control="WinJS.UI.Command" data-win-options="{
                                    id: 'selectAllItemsBtn',
                                    label: 'Select All Items',
                                    icon: 'selectall'
                                }"></button>
                <button data-win-control="WinJS.UI.Command" data-win-options="{
                                    id: 'clearSelectionBtn',
                                    label: 'Clear Selection',
                                    icon: 'clearselection'
                                }"></button>

                <hr data-win-control="WinJS.UI.Command" data-win-options="{ type: 'separator' }" />

                <button data-win-control="WinJS.UI.Command" data-win-options="{
                                    id: 'toolbarAddFilesBtn',
                                    label: 'Add Files',
                                    icon: 'add'
                                }"></button>
            </div>
        </div>
    </div>
</body>
</html>